<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>EnglishPlay â€” Aprenda InglÃªs Brincando</title>

  <!-- Fonte futurista -->
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;600;700&display=swap" rel="stylesheet">

  <style>
    :root{
      --yellow:#ffd000; /* amarelo vivo, sem neon */
      --bg:#020617; /* fundo azulado escuro */
      --card:#0b1120;
      --radius:12px;
      --accent-text:#ffffff;
    }
    *{box-sizing:border-box;margin:0;padding:0}
    html,body{height:100%}
    body{
      background:var(--bg);
      color:var(--accent-text);
      font-family:Orbitron, sans-serif;
      -webkit-font-smoothing:antialiased;
      padding:18px;
    }

    /* Header */
    header{display:flex;align-items:center;justify-content:space-between;gap:14px}
    .brand{display:flex;align-items:center;gap:12px}
    .brand img{height:56px;border-radius:10px}
    .brand h1{color:var(--yellow);font-size:20px}

    nav{display:flex;gap:10px;align-items:center}
    nav .search-wrap{display:flex;align-items:center;background:transparent;border:2px solid var(--yellow);padding:8px;border-radius:12px}
    input[type=search]{background:transparent;border:none;color:#fff;outline:none;padding:6px;width:220px}
    .icon{width:30px;height:30px;display:inline-flex;align-items:center;justify-content:center;border-radius:8px;border:2px solid var(--yellow);cursor:pointer}

    /* Layout */
    .container{max-width:1200px;margin:20px auto}
    .hero{display:flex;align-items:center;gap:20px;margin-top:18px}
    .hero .left{flex:1}
    .hero .right{width:320px}
    .card{background:var(--card);border-radius:var(--radius);padding:18px;border:2px solid var(--yellow)}

    h1{color:var(--yellow);font-size:40px;margin-bottom:10px}
    p.lead{color:#d9d9d9}

    /* Lessons grid */
    .lessons-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(120px,1fr));gap:12px;margin-top:18px}
    .lesson-btn{background:transparent;border:2px solid var(--yellow);padding:12px;border-radius:12px;cursor:pointer;text-align:center;transition:transform .12s ease, box-shadow .12s;}
    .lesson-btn:hover{transform:translateY(-6px)}
    .lesson-btn.locked{opacity:0.8;position:relative}
    .lesson-btn.locked::after{content:'ðŸ”’';position:absolute;right:8px;top:8px}
    .lesson-btn.free{box-shadow:0 6px 0 rgba(255,208,0,0.08)}

    /* Animated buttons */
    .btn{display:inline-block;border:2px solid var(--yellow);padding:10px 14px;border-radius:12px;background:transparent;color:inherit;cursor:pointer;transition:all .18s}
    .btn:hover{transform:translateY(-4px)}

    /* Forms */
    form{display:flex;flex-direction:column;gap:10px}
    input,textarea,select{background:transparent;border:2px solid var(--yellow);padding:10px;border-radius:10px;color:inherit}

    /* Small UI */
    .top-actions{display:flex;gap:10px;align-items:center}
    .watermark{opacity:0.06;position:absolute;right:40px;top:160px;width:180px}

    /* Profile */
    .profile{display:flex;gap:16px;align-items:center}
    .avatar{width:84px;height:84px;border-radius:14px;border:2px solid var(--yellow);overflow:hidden;display:flex;align-items:center;justify-content:center;background:#081018}

    /* Notifications and menu */
    .menu{display:flex;gap:8px;align-items:center}
    .menu .dot{height:8px;width:8px;background:var(--yellow);border-radius:50%}

    /* Responsive */
    @media (max-width:900px){
      .hero{flex-direction:column}
      input[type=search]{width:120px}
    }

    /* Small confetti animation placeholder */
    .confetti{position:fixed;left:0;top:0;width:100%;height:100%;pointer-events:none}
  </style>
</head>
<body>
  <div class="container">
    <header>
      <div class="brand">
        <!-- logo enviado pelo usuÃ¡rio (sem fundo) -->
        <img src="logo.png" alt="Logo EnglishPlay"/>
        <h1>EnglishPlay</h1>
      </div>

      <nav class="menu">
        <div class="search-wrap card">
          <input id="searchUsers" type="search" placeholder="Pesquisar usuÃ¡rios..." />
        </div>
        <div id="notifications" class="icon" title="NotificaÃ§Ãµes">ðŸ””<span id="notifCount" style="display:none;margin-left:6px"></span></div>
        <div id="hamburger" class="icon" title="Menu">â˜°</div>
        <div id="profileBtn" class="icon" title="Perfil">ðŸ‘¤</div>
      </nav>
    </header>

    <!-- watermark logo espalhada pelo site -->
    <img src="logo.png" class="watermark" alt="marca d'Ã¡gua" />

    <!-- Hero -->
    <section class="hero">
      <div class="left card">
        <h1>Aprenda inglÃªs de forma divertida</h1>
        <p class="lead">Lessons curtas, jogos, personagens animados e uma comunidade para trocar mensagens. Comece grÃ¡tis: as 5 primeiras aulas sÃ£o liberadas.</p>
        <div style="margin-top:12px;display:flex;gap:10px">
          <button class="btn" id="openLogin">Login / Cadastro</button>
          <button class="btn" id="openAi">Falar com Sr. TV (IA)</button>
        </div>
      </div>

      <aside class="right card">
        <h3 style="color:var(--yellow)">Seu progresso</h3>
        <div id="progressSummary">Nenhum progresso ainda â€” inicie suas aulas!</div>
      </aside>
    </section>

    <!-- Lessons section -->
    <section style="margin-top:18px">
      <div class="card">
        <h2 style="color:var(--yellow)">Aulas (200)</h2>
        <div class="lessons-grid" id="lessonsGrid"></div>
      </div>
    </section>

    <!-- Chat / IA modal (simulada) -->
    <div id="aiModal" style="display:none;position:fixed;left:0;top:0;width:100%;height:100%;background:rgba(0,0,0,0.6);align-items:center;justify-content:center">
      <div style="max-width:820px;margin:40px auto;background:var(--card);padding:18px;border:2px solid var(--yellow);border-radius:12px;">
        <h3 style="color:var(--yellow)">Sr. TV â€” Assistente</h3>
        <div id="chatArea" style="height:300px;overflow:auto;background:#050710;padding:8px;border-radius:8px;margin-bottom:8px"></div>
        <div style="display:flex;gap:8px">
          <input id="userMsg" placeholder="Escreva sua dÃºvida..." style="flex:1" />
          <button class="btn" id="sendMsg">Enviar</button>
          <button class="btn" id="closeAi">Fechar</button>
        </div>
        <p style="color:#aaa;margin-top:8px;font-size:13px">Para respostas reais via OpenAI, vocÃª deve implementar um endpoint server-side que envie solicitaÃ§Ãµes para a API da OpenAI. Aqui temos uma simulaÃ§Ã£o local.</p>
      </div>
    </div>

    <!-- Payment modal for unlocking lessons -->
    <div id="paymentModal" style="display:none;position:fixed;left:0;top:0;width:100%;height:100%;background:rgba(0,0,0,0.6);align-items:center;justify-content:center">
      <div style="max-width:720px;margin:40px auto;background:var(--card);padding:18px;border:2px solid var(--yellow);border-radius:12px;">
        <h3 style="color:var(--yellow)">Desbloquear aulas</h3>
        <p>Para desbloquear todas as aulas (a partir da 6Âª) â€” valor: <strong>R$2,00</strong> / mÃªs.</p>

        <div style="display:flex;gap:12px;flex-wrap:wrap;margin-top:8px">
          <div style="flex:1;min-width:220px" class="card">
            <h4 style="color:var(--yellow)">PIX</h4>
            <p id="pixKey">00020126580014BR.GOV.BCB.PIX0136d9b1e552-e431-4d8b-b28e-eca5cddf654252040000530398654040.995802BR5922Edmilson dos Reis Lima6009SAO PAULO621405102mUMXXZDnB63047198</p>
            <div style="display:flex;gap:8px;margin-top:8px">
              <button class="btn" id="copyPix">Copiar chave PIX</button>
              <button class="btn" id="generateQr">Gerar QR (abrirÃ¡ imagem)</button>
            </div>
            <img id="pixQr" alt="QR PIX" style="margin-top:10px;display:block;max-width:220px" />
          </div>

          <div style="flex:1;min-width:220px" class="card">
            <h4 style="color:var(--yellow)">CartÃ£o de crÃ©dito / dÃ©bito</h4>
            <p>IntegraÃ§Ã£o de cartÃ£o requer provedor (Ex: Mercado Pago). Aqui oferecemos um formulÃ¡rio simulado â€” implemente integraÃ§Ã£o real no backend.</p>
            <form id="cardForm">
              <input placeholder="NÃºmero do cartÃ£o" />
              <input placeholder="Validade" />
              <input placeholder="CVC" />
              <div style="display:flex;gap:8px;margin-top:8px">
                <button class="btn" id="payCard" type="button">Pagar (simular)</button>
                <button class="btn" id="closePayment" type="button">Cancelar</button>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>

    <!-- Login / cadastro modal -->
    <div id="authModal" style="display:none;position:fixed;left:0;top:0;width:100%;height:100%;background:rgba(0,0,0,0.6);align-items:center;justify-content:center">
      <div style="max-width:720px;margin:40px auto;background:var(--card);padding:18px;border:2px solid var(--yellow);border-radius:12px;">
        <div style="display:flex;gap:12px">
          <div style="flex:1">
            <h3 style="color:var(--yellow)">Entrar / Cadastrar</h3>
            <div style="display:flex;gap:8px;margin-bottom:8px">
              <button id="showLogin" class="btn">Login</button>
              <button id="showSignup" class="btn">Cadastro</button>
            </div>

            <div id="loginForm" style="display:none">
              <form id="formLogin">
                <input id="loginUser" placeholder="Email ou nome de usuÃ¡rio" required />
                <input id="loginPass" type="password" placeholder="Senha" required />
                <div style="display:flex;gap:8px;margin-top:8px">
                  <button class="btn" type="submit">Entrar</button>
                </div>
              </form>
            </div>

            <div id="signupForm" style="display:none">
              <form id="formSignup">
                <input id="signupEmail" placeholder="Email ou nÃºmero de telefone" required />
                <input id="signupName" placeholder="Nome - como quer ser chamado" required />
                <input id="signupUser" placeholder="Nome de usuÃ¡rio (Ãºnico)" required />
                <input id="signupPass1" type="password" placeholder="Senha" required />
                <input id="signupPass2" type="password" placeholder="Confirmar senha" required />
                <div style="display:flex;gap:8px;margin-top:8px">
                  <button class="btn" type="submit">Cadastrar e continuar</button>
                </div>
              </form>
            </div>

          </div>

          <aside style="width:260px">
            <img src="logo.png" alt="logo" style="width:100%;opacity:0.95;border-radius:10px;" />
            <p style="margin-top:8px;color:#ccc">Sua logo aparece aqui â€” serÃ¡ mostrada tambÃ©m no topo e espalhada pelo site.</p>
          </aside>
        </div>

      </div>
    </div>

    <!-- Profile modal -->
    <div id="profileModal" style="display:none;position:fixed;left:0;top:0;width:100%;height:100%;background:rgba(0,0,0,0.6);align-items:center;justify-content:center">
      <div style="max-width:700px;margin:40px auto;background:var(--card);padding:18px;border:2px solid var(--yellow);border-radius:12px;">
        <h3 style="color:var(--yellow)">Perfil</h3>
        <div style="display:flex;gap:14px">
          <div class="avatar card" style="width:140px;height:140px;padding:10px;">
            <img id="profileImg" src="logo.png" alt="avatar" style="width:100%;height:100%;object-fit:cover;border-radius:8px"/>
            <input id="profilePicInput" type="file" accept="image/*" style="margin-top:8px" />
          </div>

          <div style="flex:1">
            <div style="display:flex;gap:12px;align-items:center">
              <div style="flex:1">
                <label>Nome (pode alterar atÃ© 3x)</label>
                <input id="displayName" />
              </div>
              <div>
                <div>Amigos: <strong id="friendsCount">0</strong></div>
                <div>Dias consecutivos: <strong id="streakCount">0</strong></div>
              </div>
            </div>

            <div style="margin-top:12px">
              <label>Melhor amigo</label>
              <div id="bestFriend">â€”</div>
            </div>

            <div style="margin-top:12px">
              <button class="btn" id="saveProfile">Salvar</button>
              <button class="btn" id="closeProfile">Fechar</button>
            </div>

          </div>
        </div>
      </div>
    </div>

    <!-- Notifications drawer (simple) -->
    <div id="notifDrawer" style="display:none;position:fixed;right:18px;top:80px;width:320px;background:var(--card);border:2px solid var(--yellow);padding:12px;border-radius:12px">
      <h4 style="color:var(--yellow)">NotificaÃ§Ãµes</h4>
      <div id="notifList">Nenhuma notificaÃ§Ã£o</div>
    </div>

    <!-- Footer -->
    <footer style="margin-top:30px;display:flex;justify-content:space-between;align-items:center">
      <div style="display:flex;gap:12px;align-items:center"><img src="logo.png" style="height:40px" alt="logo"/><div style="color:var(--yellow)">EnglishPlay</div></div>
      <div style="color:#aaa">Â© <span id="year"></span> EnglishPlay</div>
    </footer>
  </div>

  <canvas id="confettiCanvas" class="confetti"></canvas>

  <script>
    // small util helpers
    const $ = sel => document.querySelector(sel);
    const $$ = sel => Array.from(document.querySelectorAll(sel));

    // persist users and app state in localStorage (simulation)
    const DB = {
      get users(){ return JSON.parse(localStorage.getItem('ep_users')||'[]'); },
      set users(v){ localStorage.setItem('ep_users', JSON.stringify(v)); },
      get current(){ return JSON.parse(localStorage.getItem('ep_current')||'null'); },
      set current(v){ localStorage.setItem('ep_current', JSON.stringify(v)); },
      get unlocked(){ return JSON.parse(localStorage.getItem('ep_unlocked')||'false'); },
      set unlocked(v){ localStorage.setItem('ep_unlocked', JSON.stringify(v)); }
    };

    // init year in footer
    document.getElementById('year').textContent = new Date().getFullYear();

    // build lessons grid
    function renderLessons(){
      const grid = document.getElementById('lessonsGrid');
      grid.innerHTML='';
      for(let i=1;i<=200;i++){
        const btn = document.createElement('button');
        btn.className='lesson-btn'+(i<=5?' free':' locked');
        btn.textContent = 'Aula ' + i;
        btn.dataset.aula = i;
        btn.addEventListener('click',onLessonClick);
        grid.appendChild(btn);
      }
      updateUnlocked();
    }

    function onLessonClick(e){
      const aula = Number(e.currentTarget.dataset.aula);
      if(aula>5 && !DB.unlocked){
        openPaymentModal();
        return;
      }
      openLesson(aula);
    }

    function openLesson(n){
      alert('Abrindo Aula ' + n + '\\nAqui vocÃª verÃ¡ o conteÃºdo, personagens animados, liÃ§Ãµes, e testes. (SimulaÃ§Ã£o)');
      // simulate scoring
      const u = DB.current;
      if(u){
        u.score = (u.score||0) + Math.floor(Math.random()*10 + 5);
        localStorage.setItem('ep_current', JSON.stringify(u));
        updateProfileSummary();
      }
    }

    // Payment modal actions
    const pixKey = document.getElementById('pixKey').textContent.trim();
    document.getElementById('copyPix').addEventListener('click',async ()=>{
      await navigator.clipboard.writeText(pixKey);
      alert('Chave PIX copiada para a Ã¡rea de transferÃªncia.');
    });
    document.getElementById('generateQr').addEventListener('click', ()=>{
      const url = 'https://api.qrserver.com/v1/create-qr-code/?size=220x220&data='+encodeURIComponent(pixKey);
      document.getElementById('pixQr').src = url;
    });
    document.getElementById('closePayment').addEventListener('click', ()=>{ closePaymentModal(); });
    document.getElementById('payCard').addEventListener('click', ()=>{ simulatePayment(); });

    function openPaymentModal(){ $('#paymentModal').style.display='flex'; }
    function closePaymentModal(){ $('#paymentModal').style.display='none'; }

    function simulatePayment(){
      // simulate delay
      setTimeout(()=>{
        DB.unlocked = true;
        closePaymentModal();
        unlockAnimation();
        updateUnlocked();
        alert('Pagamento confirmado (simulado). Aulas desbloqueadas.');
      },1000);
    }

    function updateUnlocked(){
      if(DB.unlocked){
        $$('.lesson-btn.locked').forEach(b=>{ b.classList.remove('locked'); b.classList.add('free'); b.style.opacity=1; b.removeAttribute('disabled'); });
      }
    }

    // Unlock animation (cadeado abrindo + confetti)
    function unlockAnimation(){
      // simple confetti burst
      const c = document.getElementById('confettiCanvas');
      c.width = window.innerWidth; c.height = window.innerHeight; const ctx = c.getContext('2d');
      const pieces = [];
      for(let i=0;i<120;i++) pieces.push({x:window.innerWidth/2,y:200,vx:(Math.random()-0.5)*10,vy:Math.random()*-10-2,rot:Math.random()*360,clr: ['#ffd000','#ffffff','#ffd000'][Math.floor(Math.random()*3)]});
      let t=0;
      const id = setInterval(()=>{
        ctx.clearRect(0,0,c.width,c.height);
        pieces.forEach(p=>{ p.x+=p.vx; p.y+=p.vy; p.vy+=0.4; ctx.fillStyle=p.clr; ctx.fillRect(p.x, p.y, 6, 6); });
        t++; if(t>120){ clearInterval(id); ctx.clearRect(0,0,c.width,c.height); }
      },16);
    }

    // AUTH: Signup & login (client-side simulation)
    $('#openLogin').addEventListener('click', ()=>{ $('#authModal').style.display='flex'; showSignupForm(); });
    $('#showSignup').addEventListener('click', showSignupForm);
    $('#showLogin').addEventListener('click', showLoginForm);
    $('#closeAi').addEventListener('click', ()=>$('#aiModal').style.display='none');

    function showSignupForm(){ $('#signupForm').style.display='block'; $('#loginForm').style.display='none'; }
    function showLoginForm(){ $('#loginForm').style.display='block'; $('#signupForm').style.display='none'; }

    document.getElementById('formSignup').addEventListener('submit', (ev)=>{
      ev.preventDefault();
      const email = $('#signupEmail').value.trim();
      const name = $('#signupName').value.trim();
      const user = $('#signupUser').value.trim();
      const p1 = $('#signupPass1').value;
      const p2 = $('#signupPass2').value;
      if(p1!==p2){ alert('As senhas nÃ£o conferem.'); return; }
      const users = DB.users;
      if(users.find(u=>u.username.toLowerCase()===user.toLowerCase())){ alert('Nome de usuÃ¡rio jÃ¡ existe. Escolha outro.'); return; }
      const newUser = {email, name, username:user, password:p1, score:0, friends:[],streak:0, nameChanges:0};
      users.push(newUser); DB.users = users; DB.current = newUser;
      // after signup redirect to questionnaire
      $('#authModal').style.display='none';
      openQuestionnaire();
      updateProfileSummary();
    });

    document.getElementById('formLogin').addEventListener('submit', (ev)=>{
      ev.preventDefault();
      const user = $('#loginUser').value.trim();
      const pass = $('#loginPass').value;
      const u = DB.users.find(x => (x.email===user||x.username===user) && x.password===pass);
      if(!u){ alert('UsuÃ¡rio ou senha invÃ¡lidos.'); return; }
      DB.current = u; $('#authModal').style.display='none'; updateProfileSummary();
      alert('Login realizado como '+u.name);
    });

    function openQuestionnaire(){
      const q = [
        {q:'Como vocÃª ficou sabendo do EnglishPlay?', id:'q1'},
        {q:'Qual sua meta diÃ¡ria de dias consecutivos?', id:'q2'},
        {q:'Para que vocÃª quer aprender inglÃªs?', id:'q3'},
        {q:'Quanto vocÃª entende de inglÃªs? (nada, conversas bÃ¡sicas, fluente)', id:'q4'}
      ];
      const answers = {};
      let idx=0;
      function showNext(){
        if(idx>=q.length){
          alert('QuestionÃ¡rio finalizado. Obrigado!');
          return;
        }
        const cur = q[idx];
        const val = prompt(cur.q);
        answers[cur.id] = val;
        idx++; showNext();
      }
      showNext();
      // store questionnaire answers in current user
      const u = DB.current; if(u){ u.questionnaire = answers; localStorage.setItem('ep_current', JSON.stringify(u)); const users=DB.users; const i = users.findIndex(x=>x.username===u.username); if(i>=0){ users[i]=u; DB.users=users; } }
    }

    // Profile UI
    $('#profileBtn').addEventListener('click', ()=>{ openProfile(); });
    $('#closeProfile').addEventListener('click', ()=>$('#profileModal').style.display='none');
    $('#saveProfile').addEventListener('click', ()=>{
      const u = DB.current; if(!u){ alert('FaÃ§a login primeiro'); return; }
      if(u.nameChanges>=3 && $('#displayName').value !== u.name){ alert('VocÃª jÃ¡ alterou o nome 3 vezes.'); return; }
      if($('#displayName').value !== u.name){ u.nameChanges = (u.nameChanges||0)+1; }
      u.name = $('#displayName').value; u.bestFriend = $('#bestFriend').textContent;
      localStorage.setItem('ep_current', JSON.stringify(u));
      const users=DB.users; const i = users.findIndex(x=>x.username===u.username); if(i>=0){ users[i]=u; DB.users=users; }
      alert('Perfil salvo'); $('#profileModal').style.display='none'; updateProfileSummary();
    });

    function openProfile(){ const u = DB.current; if(!u){ alert('FaÃ§a login'); $('#authModal').style.display='flex'; showLoginForm(); return; } $('#profileModal').style.display='flex'; $('#displayName').value = u.name || u.username; $('#friendsCount').textContent = (u.friends||[]).length; $('#streakCount').textContent = u.streak||0; $('#bestFriend').textContent = u.bestFriend||'â€”'; }

    // Search users & friends
    $('#searchUsers').addEventListener('input', (e)=>{
      const q = e.target.value.trim().toLowerCase(); if(!q) return;
      const matches = DB.users.filter(u=>u.username.toLowerCase().includes(q) || u.name.toLowerCase().includes(q));
      if(matches.length) alert('Resultados: ' + matches.map(m=>m.username + ' ('+m.name+')').join(', '));
      else alert('Nenhum usuÃ¡rio encontrado');
    });

    // Notifications and hamburger
    $('#notifications').addEventListener('click', ()=>{ const d = $('#notifDrawer'); d.style.display = d.style.display==='none'?'block':'none'; });
    $('#hamburger').addEventListener('click', ()=>{ const u = DB.current; if(!u){ $('#authModal').style.display='flex'; showLoginForm(); return; } const menu = ['Editar dados pessoais','NotificaÃ§Ãµes (on/off)','Logout']; const choose = prompt('Menu:\\n1) Editar dados pessoais\\n2) NotificaÃ§Ãµes\\n3) Logout'); if(!choose) return; if(choose.startsWith('1')) openProfile(); if(choose.startsWith('2')) alert('VocÃª pode ativar/desativar notificaÃ§Ãµes nas configuraÃ§Ãµes (simulaÃ§Ã£o).'); if(choose.startsWith('3')){ DB.current=null; localStorage.removeItem('ep_current'); alert('VocÃª saiu.'); }
    });

    // AI chat (simulada). For real integration, implement server endpoint using OpenAI keys
    $('#openAi').addEventListener('click', ()=>{ $('#aiModal').style.display='flex'; });
    $('#sendMsg').addEventListener('click', ()=>{
      const text = $('#userMsg').value.trim(); if(!text) return; const area = $('#chatArea'); area.innerHTML += '<div style="color:#ffd000;margin-bottom:6px">VocÃª: '+escapeHtml(text)+'</div>';
      // simulated assistant
      setTimeout(()=>{
        area.innerHTML += '<div style="color:#fff;margin-bottom:8px">Sr. TV: OlÃ¡! Eu posso ajudar com dÃºvidas sobre liÃ§Ãµes, regras gramaticais, pronÃºncia e suporte do app. (SimulaÃ§Ã£o)</div>';
        area.scrollTop = area.scrollHeight;
      },600);
      $('#userMsg').value='';
    });

    function escapeHtml(s){ return s.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;'); }

    // On load
    renderLessons();
    updateUnlocked();
    // load current user if exists
    if(DB.current){ updateProfileSummary(); }

    function updateProfileSummary(){ const u = DB.current; if(!u){ $('#progressSummary').textContent='UsuÃ¡rio nÃ£o logado'; return; } $('#progressSummary').textContent = 'UsuÃ¡rio: '+u.name+' | Pontos: '+(u.score||0)+' | Nivel estimado: '+Math.floor((u.score||0)/100);
    }

    // Simple friend add simulation (not full UI) - will appear as notifications
    // For completeness, create a fake users list if empty to test search/friends
    if(DB.users.length===0){ DB.users = [ {email:'duo@englishplay',name:'Duo Test',username:'duo',password:'test',friends:[],score:120,streak:3} ]; }

  </script>
</body>
</html>
