<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Ranking â€” EnglishPlay</title>
<link rel="stylesheet" href="style.css">
</head>
<body>

<header class="navbar">
  <div class="nav-logo" onclick="location.href='index.html'"><img src="logo.png"><span class="nav-title">EnglishPlay</span></div>
  <input class="search-box" placeholder="Pesquisar..." disabled>
  <div class="nav-user" onclick="logout()">Sair</div>
</header>

<div class="main" style="margin-top:130px; justify-content:center;">
  <div class="section-box" style="width:760px;">
    <h2 class="section-title">ğŸ† Ranking</h2>
    <div id="rankingList">Carregando ranking...</div>
  </div>
</div>

<script>
const USERS = JSON.parse(localStorage.getItem("users")) || {};
let SESSION = JSON.parse(localStorage.getItem("session")) || null;
if(!SESSION) location.href='auth.html';

function renderRanking(){
  const arr = Object.values(USERS).sort((a,b)=> (b.xp||0) - (a.xp||0)).slice(0,50);
  const el = document.getElementById("rankingList");
  if(!arr.length){ el.innerHTML = "<p>Nenhum usuÃ¡rio registrado ainda.</p>"; return; }
  el.innerHTML = arr.map((u,i)=> `
    <div style="display:flex;align-items:center;gap:12px;padding:10px;border-bottom:1px solid #222">
        <div style="width:36px;height:36px;border-radius:50%;overflow:hidden;border:3px solid #ffcc00">
            <img src="${u.avatar||'logo.png'}" style="width:100%;height:100%;object-fit:cover"/>
        </div>
        <div style="flex:1">
          <b>#${i+1} ${u.name}</b><br/>
          <small style="opacity:.8">${(u.xp||0)} XP â€¢ ${u.streak||0} dias</small>
        </div>
        <div style="width:110px;text-align:right;color:#ffcc00">${(u.xp||0)} XP</div>
    </div>
  `).join("");
}

document.addEventListener("DOMContentLoaded", renderRanking);
</script>

</body>
</html>
